# Rotisserie baseball statistics scraper

Stat scraper for Darren Lewis & the Gnus
(my rotisserie baseball team for 2022)

### Usage

Darren Lewis & the Gnus are participating in American Pie, a 10 team American League only rotisserie baseball league.  Rosters get set every Wednesday.

In most cases, I am interested in how teams fared for the previous day.  This information can be scraped by running python update.py.

If one is interested in getting the results for a certain day, one can run
update.get_info_for_day() passing in the datetime value for the day we are interested in.

### Output

The collected data is placed in html pages (one for each team) saved in a newly created directory for the day being checked named html_files_YYYYmmdd.  Each html page is named after the team name, with X used in place of special characters (right now ampersand and single quote used as an apostrophe).

### roto.ini file

Roto.ini is an ini file used to pass specific data to the statistics scraper.  It contains a DEFAULT section with the following keys:

* username: Cbssports.com User ID
* password: Cbssports.com User password
* league: Cbssports league name.  This can be obtained once the league is started by observing the http address of league pages seen from a browser.

### General behavior

The current league period length is one week and periods change every Wednesday.  Roster moves become official for next period prior to the first Wednesday game.  NOTE to self: I should probably parameterize the major league pool, the period length, and the starting day of the week to be more general (this stuff is currently hard coded).

Most modules used by this program save data into json files which get read
by subsequent modules.  It's a little bulky but it keeps all the modules separate and allows for intermediate data storage.  If expected files are present, the code skips the file creation steps in most cases.

### Specific behavior

update_day.py -- Main calling module.  Complete_yesterday collects the data for yesterday, get_info_for_day collects the data for a specific day.

get_team_abbrev.py -- Get_teams_list collects the Cbs abbreviations for valid teams in the league.  Stores the result as a list in data/abbreviations.json.  Skips executing if data/abbreviations.json already exists.

get_roto_teams.py -- Get_league_team_data collects the Rotisserie team information for this league for this period.  Essentially produces a roster of each team's active players.  Stores the result in league-YYYY-mm-dd.json where the date is the previous Wednesday (start of this period)  Skips executing if this week's league-*.json file already exists.

get_day_stats.py -- Get_players_on_date collects the real statistics for the given day from the Cbs boxscores.  Stores the results in data/stats_on_YYYYmmdd.json.  Skips executing if this file already exists.

get_daily_roto_scores -- Get_daily_roto_scores merges the information from the league-*.json file and the data/stats_on_*.json file and creates a new file, data/rteams_on_YYYYmmdd.json containing Rotisserie team rosters with players and their associated stats.  Skips executing if the rteams_*.json file already exists.

gen_html_files -- Gen_html_files creates a directory named html_files_YYYYmmdd which contains *.html files where each file is named after the Rotisserie team being displayed.  Runs even if these files already exist.

tablehtml.txt -- Template of html file generated by gen_html_files.
